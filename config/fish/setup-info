{
  "aadProfile": null,
  "addonProfiles": null,
  "agentPoolProfiles": [
    {
      "availabilityZones": [
        "2"
      ],
      "capacityReservationGroupId": null,
      "count": 3,
      "creationData": null,
      "currentOrchestratorVersion": "1.28.9",
      "enableAutoScaling": true,
      "enableEncryptionAtHost": false,
      "enableFips": false,
      "enableNodePublicIp": false,
      "enableUltraSsd": false,
      "gpuInstanceProfile": null,
      "hostGroupId": null,
      "kubeletConfig": null,
      "kubeletDiskType": "OS",
      "linuxOsConfig": null,
      "maxCount": 5,
      "maxPods": 110,
      "minCount": 1,
      "mode": "System",
      "name": "core",
      "networkProfile": null,
      "nodeImageVersion": "AKSUbuntu-2204gen2containerd-202405.27.0",
      "nodeLabels": {
        "hub.jupyter.org/node-purpose": "core"
      },
      "nodePublicIpPrefixId": null,
      "nodeTaints": null,
      "orchestratorVersion": "1.28",
      "osDiskSizeGb": 128,
      "osDiskType": "Managed",
      "osSku": "Ubuntu",
      "osType": "Linux",
      "podSubnetId": null,
      "powerState": {
        "code": "Running"
      },
      "provisioningState": "Succeeded",
      "proximityPlacementGroupId": null,
      "scaleDownMode": null,
      "scaleSetEvictionPolicy": null,
      "scaleSetPriority": null,
      "spotMaxPrice": null,
      "tags": null,
      "type": "VirtualMachineScaleSets",
      "upgradeSettings": {
        "drainTimeoutInMinutes": null,
        "maxSurge": "10%",
        "nodeSoakDurationInMinutes": null
      },
      "vmSize": "Standard_D2s_v3",
      "vnetSubnetId": null,
      "windowsProfile": null,
      "workloadRuntime": null
    }
  ],
  "apiServerAccessProfile": null,
  "autoScalerProfile": {
    "balanceSimilarNodeGroups": "false",
    "expander": "random",
    "maxEmptyBulkDelete": "10",
    "maxGracefulTerminationSec": "600",
    "maxNodeProvisionTime": "15m",
    "maxTotalUnreadyPercentage": "45",
    "newPodScaleUpDelay": "0s",
    "okTotalUnreadyCount": "3",
    "scaleDownDelayAfterAdd": "10m",
    "scaleDownDelayAfterDelete": "10s",
    "scaleDownDelayAfterFailure": "3m",
    "scaleDownUnneededTime": "10m",
    "scaleDownUnreadyTime": "20m",
    "scaleDownUtilizationThreshold": "0.5",
    "scanInterval": "10s",
    "skipNodesWithLocalStorage": "false",
    "skipNodesWithSystemPods": "true"
  },
  "autoUpgradeProfile": {
    "nodeOsUpgradeChannel": "NodeImage",
    "upgradeChannel": null
  },
  "azureMonitorProfile": null,
  "azurePortalFqdn": "jhub-safsjhub-ac16bb-dowpcbtg.portal.hcp.westus2.azmk8s.io",
  "currentKubernetesVersion": "1.28.9",
  "disableLocalAccounts": false,
  "diskEncryptionSetId": null,
  "dnsPrefix": "jhub-SAFSJHub-ac16bb",
  "enablePodSecurityPolicy": null,
  "enableRbac": true,
  "extendedLocation": null,
  "fqdn": "jhub-safsjhub-ac16bb-dowpcbtg.hcp.westus2.azmk8s.io",
  "fqdnSubdomain": null,
  "httpProxyConfig": null,
  "id": "/subscriptions/ac16bb32-6613-4444-be3e-03df4890305c/resourcegroups/SAFSJHub/providers/Microsoft.ContainerService/managedClusters/jhub",
  "identity": {
    "delegatedResources": null,
    "principalId": "f76d6382-5380-454e-bac6-e57bf481c4df",
    "tenantId": "f6b6dd5b-f02f-441a-99a0-162ac5060bd2",
    "type": "SystemAssigned",
    "userAssignedIdentities": null
  },
  "identityProfile": {
    "kubeletidentity": {
      "clientId": "4c2a9b54-8395-484e-a991-246b07f6ee8f",
      "objectId": "e3f35099-d705-4bc4-9c82-661d36df1e42",
      "resourceId": "/subscriptions/ac16bb32-6613-4444-be3e-03df4890305c/resourcegroups/MC_SAFSJHub_jhub_westus2/providers/Microsoft.ManagedIdentity/userAssignedIdentities/jhub-agentpool"
    }
  },
  "ingressProfile": null,
  "kubernetesVersion": "1.28",
  "linuxProfile": {
    "adminUsername": "azureuser",
    "ssh": {
      "publicKeys": [
        {
          "keyData": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDCfP8oQ5Ve1k5UZJUJVID5gUw4VPp4sXw3fLoqszJIAXDJUo+cqcLdvTcYbd8WNykmOfbzo6TPmgnLGzgzziv9dXWEDYUTnm5LbrFURm/jCtAKAuZanRWZKdweaKjgu7E3JUKNngZvg8sWudlJwoCSeMZsY0H1zeHOMt0+MbTSwpFHzlp7nwGPm4DYZyyucSRjPNNyjzdCNrqfX9sqzMWeEkO3K/4q2Hp7qhnNQjd/G4OsStbsP94EdLzROYNDjYPu6sw3CKoEDRSNiHdmZOdVy3kJcl7VpExMzQuKimsUT8u1NuPVoa2WTsZEl0i256RQ6ZR8hLDMvXgDIwUsZqI/"
        }
      ]
    }
  },
  "location": "westus2",
  "maxAgentPools": 100,
  "metricsProfile": {
    "costAnalysis": {
      "enabled": false
    }
  },
  "name": "jhub",
  "networkProfile": {
    "dnsServiceIp": "10.0.0.10",
    "ipFamilies": [
      "IPv4"
    ],
    "loadBalancerProfile": {
      "allocatedOutboundPorts": null,
      "backendPoolType": "nodeIPConfiguration",
      "effectiveOutboundIPs": [
        {
          "id": "/subscriptions/ac16bb32-6613-4444-be3e-03df4890305c/resourceGroups/MC_SAFSJHub_jhub_westus2/providers/Microsoft.Network/publicIPAddresses/98aee7b4-05b3-4d37-9c8c-d3307d4a0f44",
          "resourceGroup": "MC_SAFSJHub_jhub_westus2"
        }
      ],
      "enableMultipleStandardLoadBalancers": null,
      "idleTimeoutInMinutes": null,
      "managedOutboundIPs": {
        "count": 1,
        "countIpv6": null
      },
      "outboundIPs": null,
      "outboundIpPrefixes": null
    },
    "loadBalancerSku": "standard",
    "natGatewayProfile": null,
    "networkDataplane": null,
    "networkMode": null,
    "networkPlugin": "kubenet",
    "networkPluginMode": null,
    "networkPolicy": null,
    "outboundType": "loadBalancer",
    "podCidr": "10.244.0.0/16",
    "podCidrs": [
      "10.244.0.0/16"
    ],
    "serviceCidr": "10.0.0.0/16",
    "serviceCidrs": [
      "10.0.0.0/16"
    ]
  },
  "nodeResourceGroup": "MC_SAFSJHub_jhub_westus2",
  "oidcIssuerProfile": {
    "enabled": false,
    "issuerUrl": null
  },
  "podIdentityProfile": null,
  "powerState": {
    "code": "Running"
  },
  "privateFqdn": null,
  "privateLinkResources": null,
  "provisioningState": "Succeeded",
  "publicNetworkAccess": null,
  "resourceGroup": "SAFSJHub",
  "resourceUid": "666deeeef7dc9c0001a7b113",
  "securityProfile": {
    "azureKeyVaultKms": null,
    "defender": null,
    "imageCleaner": null,
    "workloadIdentity": null
  },
  "serviceMeshProfile": null,
  "servicePrincipalProfile": {
    "clientId": "msi",
    "secret": null
  },
  "sku": {
    "name": "Base",
    "tier": "Free"
  },
  "storageProfile": {
    "blobCsiDriver": null,
    "diskCsiDriver": {
      "enabled": true
    },
    "fileCsiDriver": {
      "enabled": true
    },
    "snapshotController": {
      "enabled": true
    }
  },
  "supportPlan": "KubernetesOfficial",
  "systemData": null,
  "tags": null,
  "type": "Microsoft.ContainerService/ManagedClusters",
  "upgradeSettings": null,
  "windowsProfile": null,
  "workloadAutoScalerProfile": {
    "keda": null,
    "verticalPodAutoscaler": null
  }
}

eli [ ~ ]$ az aks nodepool add \
    --cluster-name $HUB_NAME \
    --name userlarge \
    --resource-group $RES_GP \
    --enable-cluster-autoscaler \
    --min-count 0 \
    --max-count 3 \
    --node-vm-size Standard_D16ds_v5 \
    --zones 2hub.jupyter.org/node-purpose=userlarge \
{
  "availabilityZones": [
    "2"
  ],
  "capacityReservationGroupId": null,
  "count": 3,
  "creationData": null,
  "currentOrchestratorVersion": "1.28.9",
  "enableAutoScaling": true,
  "enableEncryptionAtHost": false,
  "enableFips": false,
  "enableNodePublicIp": false,
  "enableUltraSsd": false,
  "gpuInstanceProfile": null,
  "hostGroupId": null,
  "id": "/subscriptions/ac16bb32-6613-4444-be3e-03df4890305c/resourcegroups/SAFSJHub/providers/Microsoft.ContainerService/managedClusters/jhub/agentPools/userlarge",
  "kubeletConfig": null,
  "kubeletDiskType": "OS",
  "linuxOsConfig": null,
  "maxCount": 3,
  "maxPods": 110,
  "minCount": 0,
  "mode": "User",
  "name": "userlarge",
  "networkProfile": null,
  "nodeImageVersion": "AKSUbuntu-2204gen2containerd-202405.27.0",
  "nodeLabels": {
    "hub.jupyter.org/node-purpose": "userlarge"
  },
  "nodePublicIpPrefixId": null,
  "nodeTaints": null,
  "orchestratorVersion": "1.28",
  "osDiskSizeGb": 128,
  "osDiskType": "Ephemeral",
  "osSku": "Ubuntu",
  "osType": "Linux",
  "podSubnetId": null,
  "powerState": {
    "code": "Running"
  },
  "provisioningState": "Succeeded",
  "proximityPlacementGroupId": null,
  "resourceGroup": "SAFSJHub",
  "scaleDownMode": "Delete",
  "scaleSetEvictionPolicy": null,
  "scaleSetPriority": null,
  "spotMaxPrice": null,
  "tags": null,
  "type": "Microsoft.ContainerService/managedClusters/agentPools",
  "typePropertiesType": "VirtualMachineScaleSets",
  "upgradeSettings": {
    "drainTimeoutInMinutes": null,
    "maxSurge": null,
    "nodeSoakDurationInMinutes": null
  },
  "vmSize": "Standard_D16ds_v5",
  "vnetSubnetId": null,
  "windowsProfile": null,
  "workloadRuntime": null
}
